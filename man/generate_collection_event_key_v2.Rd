% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generate_collection_event_key_v2.R
\encoding{UTF-8}
\name{generate_collection_event_key_v2}
\alias{generate_collection_event_key_v2}
\title{Generate Collection Event Key Version 2}
\usage{
generate_collection_event_key_v2(
  occ = NA,
  collectorDictionary_checked_file = NULL,
  collectorDictionary_checked = NULL,
  collectorDictionary_file = NULL,
  collectorDictionary = NULL,
  silence = TRUE
)
}
\arguments{
\item{occ}{Data frame. GBIF occurrence data containing required columns:
\code{Ctrl_recordNumber}, \code{Ctrl_family}, \code{Ctrl_recordedBy}, \code{Ctrl_year}.}

\item{collectorDictionary_checked_file}{Character. Path to verified collector dictionary CSV file.}

\item{collectorDictionary_checked}{Data frame. Pre-loaded verified collector dictionary.}

\item{collectorDictionary_file}{Character. Path to base collector dictionary CSV file. If provided, loads
default dictionary from parseGBIF GitHub repository.}

\item{collectorDictionary}{Data frame. Pre-loaded base collector dictionary.}

\item{silence}{Logical. If \code{TRUE}, suppresses progress messages. Default is \code{TRUE}.}
}
\value{
A list with three components:
\itemize{
\item \code{occ_collectorsDictionary}: Occurrence data with standardized names and collection keys
\item \code{summary}: Frequency summary of collection keys
\item \code{collectorsDictionary_add}: New collector entries for dictionary updates
}
}
\description{
Generates standardized collection event keys for biological occurrence data using
optimized vectorized operations. Matches recorded collector names against collector
dictionaries and creates unique identifiers based on family, collector, record number,
and year for efficient duplicate grouping.
}
\details{
\subsection{Key Improvements from Version 1:}{
\itemize{
\item Vectorized operations replacing loops for better performance
\item Efficient data.table joins for large datasets
\item Memory-optimized dictionary loading
\item Batch processing of collector name matching
}
}

\subsection{Processing Steps:}{
\enumerate{
\item Loads and validates collector dictionaries
\item Performs vectorized matching of collector names
\item Standardizes record numbers (numeric extraction)
\item Generates unique collection event keys
\item Identifies new collectors for dictionary updates
}
}
}
\examples{
\donttest{
# Generate collection event keys with optimized processing
result <- generate_collection_event_key_v2(
  occ = occ_data,
  collectorDictionary_checked_file = 'collectorDictionary_checked.csv',
  silence = FALSE
)

# View optimized results
names(result)
head(result$occ_collectorsDictionary)
head(result$summary)
}

}
\author{
Pablo Hendrigo Alves de Melo,
Nadia Bystriakova &
Alexandre Monro
}
