% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generate_collection_event_key.R
\encoding{UTF-8}
\name{generate_collection_event_key}
\alias{generate_collection_event_key}
\title{Generate Collection Event Key for Duplicate Grouping}
\usage{
generate_collection_event_key(
  occ = NA,
  collectorDictionary_checked_file = NULL,
  collectorDictionary_checked = NULL,
  collectorDictionary_file = NULL,
  collectorDictionary = NULL,
  silence = TRUE
)
}
\arguments{
\item{occ}{Data frame. GBIF occurrence table with selected columns as returned by
\code{select_gbif_fields(columns = 'standard')}.}

\item{collectorDictionary_checked_file}{Character. Path to verified collector dictionary file.}

\item{collectorDictionary_checked}{Data frame. Verified collector dictionary data.}

\item{collectorDictionary_file}{Character. Path to base collector dictionary file. If empty, uses the default
dictionary from the parseGBIF GitHub repository.}

\item{collectorDictionary}{Data frame. Base collector dictionary data.}

\item{silence}{Logical. If \code{TRUE}, suppresses progress messages. Default is \code{TRUE}.}
}
\value{
A list with three components:
\itemize{
\item \code{occ_collectorsDictionary}: Occurrence data with generated keys and standardized fields
\item \code{summary}: Summary of record counts per collection event key
\item \code{collectorsDictionary_add}: New collectors identified for dictionary updates
}
}
\description{
Generates a unique key to identify physical and digital duplicates of collection events.
Combines the primary collector's surname, collector number, and botanical family to create
a standardized key (family + recordedByStandardized + recordNumber_Standard) that enables
grouping duplicates from the same unique collection event.
}
\details{
\subsection{Fields Created:}{
\itemize{
\item \code{Ctrl_nameRecordedBy_Standard}: Standardized collector surname
\item \code{Ctrl_recordNumber_Standard}: Numeric-only collector number
\item \code{Ctrl_key_family_recordedBy_recordNumber}: Primary collection event key
\item \code{Ctrl_key_year_recordedBy_recordNumber}: Alternative key with year
}
}

\subsection{Process:}{
\enumerate{
\item Loads and merges collector dictionaries
\item Standardizes collector names using verified dictionary
\item Extracts numeric components from collector numbers
\item Generates unique keys for collection event grouping
\item Identifies new collectors for dictionary updates
}
}
}
\examples{
\donttest{
# Generate collection event keys
result <- generate_collection_event_key(
  occ = occ_data,
  collectorDictionary_checked_file = 'collectorDictionary_checked.csv'
)

# View results
names(result)
head(result$occ_collectorsDictionary)
head(result$summary)
}

}
\seealso{
\code{\link[=collectors_get_name]{collectors_get_name()}} for extracting collector names from recordedBy fields,
\code{\link[=collectors_prepare_dictionary]{collectors_prepare_dictionary()}} for creating collector dictionaries
}
\author{
Pablo Hendrigo Alves de Melo,
Nadia Bystriakova &
Alexandre Monro
}
