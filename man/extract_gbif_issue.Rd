% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/extract_gbif_issue.R
\name{extract_gbif_issue}
\alias{extract_gbif_issue}
\title{Extract and Tabulate GBIF Data Quality Issues}
\usage{
extract_gbif_issue(occ = NA, enumOccurrenceIssue = NA)
}
\arguments{
\item{occ}{Data frame. GBIF occurrence table with selected columns as returned by
\code{select_gbif_fields(columns = 'standard')}. Must contain a \code{Ctrl_issue} column.}

\item{enumOccurrenceIssue}{Data frame. An enumeration of validation rules for single occurrence records.
If \code{NA} (default), uses the built-in \code{EnumOccurrenceIssue} dataset.}
}
\value{
A list with two data frames:
\itemize{
\item \code{occ_gbif_issue}: Original occurrence data with additional columns for each GBIF issue,
containing TRUE/FALSE values indicating whether the issue applies to each record
\item \code{summary}: Summary data frame showing the frequency of each issue across all records,
sorted by most frequent issues first
}
}
\description{
Extracts and tabulates GBIF validation rules for occurrence records, creating
individual columns for each issue type with TRUE/FALSE flags indicating whether
each issue applies to each record.
}
\details{
GBIF recognizes and documents several issues relating to data fields for individual records.
The \code{Ctrl_issue} field stores terms representing an enumeration of GBIF validation rules.
These issues can indicate data quality problems or processing alterations made by GBIF.

This function:
\enumerate{
\item Uses the \code{EnumOccurrenceIssue} dataset as a reference for known GBIF issues
\item Creates individual columns for each issue type
\item Flags each record with TRUE/FALSE for each applicable issue
\item Provides a summary of issue frequencies across the dataset
}

Not all issues indicate bad data - some flag that GBIF has altered values during processing.
}
\examples{
\donttest{
library(parseGBIF)

# Load sample data
occ_file <- 'https://raw.githubusercontent.com/pablopains/parseGBIF/main/dataGBIF/Achatocarpaceae/occurrence.txt'

occ <- prepare_gbif_occurrence_data(
  gbif_occurrece_file = occ_file,
  columns = 'standard'
)

# Extract GBIF issues
occ_gbif_issue <- extract_gbif_issue(occ = occ)

# View results
names(occ_gbif_issue)

# Summary of issues
head(occ_gbif_issue$summary)

# Issue flags for each record
colnames(occ_gbif_issue$occ_gbif_issue)
head(occ_gbif_issue$occ_gbif_issue)
}

}
\seealso{
\code{\link[=prepare_gbif_occurrence_data]{prepare_gbif_occurrence_data()}} for preparing GBIF occurrence data,
\code{\link[=select_gbif_fields]{select_gbif_fields()}} for selecting relevant GBIF fields,
\code{\link{EnumOccurrenceIssue}} for the GBIF issue enumeration dataset
}
\author{
Pablo Hendrigo Alves de Melo,
Nadia Bystriakova &
Alexandre Monro
}
