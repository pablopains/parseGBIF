% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/parse_tdwg_distribution.R
\name{parse_tdwg_distribution}
\alias{parse_tdwg_distribution}
\title{Parse TDWG Distribution for Occurrence Points}
\usage{
parse_tdwg_distribution(points, native_range, range_polygons)
}
\arguments{
\item{points}{Data frame. Occurrence records with coordinate columns:
\code{parseGBIF_decimalLongitude} and \code{parseGBIF_decimalLatitude}.}

\item{native_range}{Data frame. Native range information with TDWG level 3 codes in column \code{LEVEL3_COD}.}

\item{range_polygons}{sf object. TDWG polygon data with TDWG level 3 codes in column \code{LEVEL3_COD}.}
}
\value{
The input data frame \code{points} with an additional column:
\itemize{
\item \code{native_range}: TDWG level 3 code for points within native range,
\code{NA} for points outside native range
}
}
\description{
Identifies which occurrence points fall within the native range of a species
based on TDWG (World Geographical Scheme for Recording Plant Distributions) regions.
Performs spatial analysis to match occurrence coordinates with native range polygons.
}
\details{
\subsection{Processing Steps:}{
\enumerate{
\item Validates input parameters and coordinate data
\item Converts occurrence points to sf spatial object with WGS84 CRS
\item Filters TDWG polygons to include only the native range regions
\item Ensures CRS compatibility between points and polygons
\item Performs spatial join to identify points within native range
\item Returns original data with native range membership indicator
}
}

\subsection{Error Handling:}{
\itemize{
\item Validates coordinate data and excludes invalid coordinates
\item Checks for required columns in all input data
\item Handles geometry validation and repair automatically
\item Provides informative warnings and progress messages
}
}
}
\examples{
\donttest{
# Example with simulated data
# Create sample occurrence points
points <- data.frame(
  parseGBIF_decimalLongitude = c(-47.9, -46.6, -45.0),
  parseGBIF_decimalLatitude = c(-15.8, -23.5, -22.9),
  species = c("Species_A", "Species_B", "Species_C")
)

# Create sample native range data
native_range <- data.frame(LEVEL3_COD = c("BZL", "BZS"))

# Note: range_polygons would typically be loaded from TDWG shapefile
# For this example, we assume range_polygons is available

# Parse TDWG distribution (commented out as range_polygons is required)
# result <- parse_tdwg_distribution(
#   points = points,
#   native_range = native_range,
#   range_polygons = range_polygons
# )
}

}
\seealso{
\code{\link[=get_tdwg_distribution]{get_tdwg_distribution()}} for retrieving TDWG distribution data from POWO,
\code{\link[=parse_coordinates]{parse_coordinates()}} for coordinate validation and quality assessment
}
\author{
Pablo Hendrigo Alves de Melo,
Nadia Bystriakova &
Alexandre Monro
}
