% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/parse_tdwg_distribution.R
\name{parse_tdwg_distribution}
\alias{parse_tdwg_distribution}
\title{Parse TDWG distribution for occurrence points}
\usage{
parse_tdwg_distribution(points, native_range, range_polygons)
}
\arguments{
\item{points}{A data frame containing occurrence records with columns
\code{parseGBIF_decimalLongitude} and \code{parseGBIF_decimalLatitude}.}

\item{native_range}{A data frame containing the native range information
with column \code{LEVEL3_COD} for TDWG level 3 codes.}

\item{range_polygons}{An sf object containing TDWG polygon data with
column \code{LEVEL3_COD} for TDWG level 3 codes.}
}
\value{
The input data frame \code{points} with an additional column:
\item{native_range}{TDWG level 3 code for points within native range,
NA for points outside native range}
}
\description{
Identifies which occurrence points fall within the native
range of a species based on TDWG (World Geographical Scheme for
Recording Plant Distributions) regions.
}
\details{
This function performs the following steps:
\itemize{
\item{Converts occurrence points to an sf spatial object}
\item{Filters TDWG polygons to include only the native range}
\item{Performs spatial join to identify points within native range}
\item{Returns the original data with an additional column indicating
native range membership}
}

The function handles CRS alignment and geometry validation automatically.
}
\examples{
\donttest{
# Load example data
data(example_occurrences)
data(tdwg_native_range)
data(tdwg_polygons)

# Parse TDWG distribution
result <- parse_tdwg_distribution(
  points = example_occurrences,
  native_range = tdwg_native_range,
  range_polygons = tdwg_polygons
)

# View results
head(result[, c("parseGBIF_decimalLongitude", "parseGBIF_decimalLatitude",
               "native_range")])

# Count points by native range
table(result$native_range, useNA = "always")
}

}
\seealso{
\code{\link[parseGBIF]{preprocess_data}},
\code{\link[parseGBIF]{prepare_collectionCode}}
}
\author{
Pablo Hendrigo Alves de Melo,
Nadia Bystriakova &
Alexandre Monro
}
