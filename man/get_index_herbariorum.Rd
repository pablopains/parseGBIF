% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_index_herbariorum.R
\name{get_index_herbariorum}
\alias{get_index_herbariorum}
\title{Download Index Herbariorum Data from API}
\usage{
get_index_herbariorum(
  url = "https://sweetgum.nybg.org/science/api/v1/institutions",
  flatten = TRUE,
  timeout_sec = 30,
  verbose = FALSE
)
}
\arguments{
\item{url}{Character. The API endpoint URL for Index Herbariorum data.
Default is "https://sweetgum.nybg.org/science/api/v1/institutions".}

\item{flatten}{Logical. If \code{TRUE} (default), flattens nested JSON structures into
a data frame. If \code{FALSE}, returns the raw nested list structure.}

\item{timeout_sec}{Numeric. Timeout in seconds for API request. Default is 30 seconds.}

\item{verbose}{Logical. If \code{TRUE}, displays verbose HTTP request information.
Default is \code{FALSE}.}
}
\value{
A list or data frame (depending on \code{flatten} parameter) containing
Index Herbariorum institution data. Typical structure includes:
\itemize{
\item Institution codes and names
\item Geographic information (country, city)
\item Contact details and URLs
\item Collection statistics
\item Administrative metadata
}
}
\description{
Downloads herbarium institution data from the Index Herbariorum API maintained
by the New York Botanical Garden. Returns a structured list or data frame
containing information about herbaria worldwide.
}
\details{
\subsection{Data Source:}{

The Index Herbariorum API provides comprehensive information about
herbaria institutions worldwide, including codes, locations, contact
information, and collection statistics.
}

\subsection{HTTP Client:}{

The function preferentially uses \code{httr2} if available for modern
HTTP handling with retry logic. Falls back to \code{httr} if \code{httr2} is
not installed.
}

\subsection{Error Handling:}{
\itemize{
\item Implements retry logic for transient errors (403, 500+)
\item Provides informative error messages for HTTP failures
\item Handles timeout scenarios gracefully
}
}
}
\examples{
\donttest{
# Download Index Herbariorum data
tryCatch({
  herbarium_data <- get_index_herbariorum()

  # View the structure of the data
  str(herbarium_data, max.level = 2)

  # Access specific elements
  if (!is.null(herbarium_data$data)) {
    head(herbarium_data$data)
  }
}, error = function(e) {
  message("API request failed: ", e$message)
})
}

}
\seealso{
\code{\link[=prepare_gbif_occurrence_data]{prepare_gbif_occurrence_data()}} for preparing GBIF occurrence data,
\code{\link[=select_gbif_fields]{select_gbif_fields()}} for selecting relevant GBIF fields
}
\author{
Pablo Hendrigo Alves de Melo,
Nadia Bystriakova &
Alexandre Monro
}
