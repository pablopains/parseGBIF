<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Export of results — export_data • parseGBIF</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Export of results — export_data"><meta property="og:description" content="For each unique collection event key, complete or incomplete,
outputs will be created which combine information from duplicate records and generate a
single unique collection event record to replace them.
The main output fields relating to taxonomic identification and geographic coordinates:
parseGBIF_sample_taxon_name = scientific name chosen as taxonomic identification for unique collection event
parseGBIF_number_taxon_names = number of scientific names found in duplicates of unique collection event
parseGBIF_sample_taxon_name_status = status of choice of 'identified', 'divergent identifications', 'unidentified'
parseGBIF_unidentified_sample = if unique collection event has taxonomic identification
parseGBIF_decimalLatitude = latitude in decimal degrees
parseGBIF_decimalLongitude = longitude in decimal degrees
parseGBIF_useful_for_spatial_analysis = whether the coordinates are useful for spatial analysis.
How is the taxon binomial attributed to the unique collection event selected?


Where the unique collection event key is complete:
The accepted TAXON_NAME selected is that which is most frequently applied to the duplicate vouchers at or below the rank of species.
Where two named are applied with equal frequency then a mechanical approach, using alphabetical order, is applied, the first listed TAXON_NAME being chosen.
Where there is no identification, at or below the rank of species, then the unique collection event, the unique collection event is indicated as unidentified.
Where the unique collection event key is incomplete:
Where the unique collection event key is incomplete, then each record is treated as a unique collection event. If there is no identification, at or below the rank of species, then the unique collection event is classified as unidentified.
__Geospatial information __
If the master voucher does not have geographic coordinates, we will seek coordinates from the duplicate records associated with it.
Finally, the records are separated into three sets of data:
useable_data - Where unique collection event with taxonomic identification and geographic coordinates are complete. This represents the useable dataset.
unusable_data  - Where unique collection event without taxonomic identification and/or geographic coordinates.
duplicates The duplicates of unique collection events complete / incomplete


With this, it is possible to perform:
Merge information between fields of duplicates of a unique collection event to create a synthetic record for each unique collection event,
Compare the frequency of content in fields
Generate a work package summary
For each complete unique collection event key, data fields that are empty in the digital voucher record will be populated with data from the respective duplicates.
During content merging, we indicate fields associated with the description, location, and data of the unique collection event.
By default, fields_to_merge parameter of export_data function contains:
Ctrl_fieldNotes
Ctrl_year
Ctrl_stateProvince
Ctrl_municipality
Ctrl_locality
Ctrl_countryCode
Ctrl_eventDate
Ctrl_habitat
Ctrl_level0Name
Ctrl_level1Name
Ctrl_level2Name
Ctrl_level3Name

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">parseGBIF</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Export of results</h1>
    
    <div class="hidden name"><code>export_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>For each unique collection event key, complete or incomplete,
outputs will be created which combine information from duplicate records and generate a
single unique collection event record to replace them.
The main output fields relating to taxonomic identification and geographic coordinates:</p><ul><li><p>parseGBIF_sample_taxon_name = scientific name chosen as taxonomic identification for unique collection event</p></li>
<li><p>parseGBIF_number_taxon_names = number of scientific names found in duplicates of unique collection event</p></li>
<li><p>parseGBIF_sample_taxon_name_status = status of choice of 'identified', 'divergent identifications', 'unidentified'</p></li>
<li><p>parseGBIF_unidentified_sample = if unique collection event has taxonomic identification</p></li>
<li><p>parseGBIF_decimalLatitude = latitude in decimal degrees</p></li>
<li><p>parseGBIF_decimalLongitude = longitude in decimal degrees</p></li>
<li><p>parseGBIF_useful_for_spatial_analysis = whether the coordinates are useful for spatial analysis.
<strong>How is the taxon binomial attributed to the unique collection event selected?</strong></p></li>
</ul><ol><li><p>Where the unique collection event key is complete:
The accepted TAXON_NAME selected is that which is most frequently applied to the duplicate vouchers at or below the rank of species.
Where two named are applied with equal frequency then a mechanical approach, using alphabetical order, is applied, the first listed TAXON_NAME being chosen.
Where there is no identification, at or below the rank of species, then the unique collection event, the unique collection event is indicated as unidentified.</p></li>
<li><p>Where the unique collection event key is incomplete:
Where the unique collection event key is incomplete, then each record is treated as a unique collection event. If there is no identification, at or below the rank of species, then the unique collection event is classified as unidentified.
__Geospatial information __
If the master voucher does not have geographic coordinates, we will seek coordinates from the duplicate records associated with it.
Finally, the records are separated into three sets of data:
<strong>useable_data</strong> - Where unique collection event with taxonomic identification and geographic coordinates are complete. This represents the useable dataset.
<strong>unusable_data</strong>  - Where unique collection event without taxonomic identification and/or geographic coordinates.
<strong>duplicates</strong> The duplicates of unique collection events complete / incomplete</p></li>
</ol><p>With this, it is possible to perform:
Merge information between fields of duplicates of a unique collection event to create a synthetic record for each unique collection event,
Compare the frequency of content in fields
Generate a work package summary</p>
<p>For each complete unique collection event key, data fields that are empty in the digital voucher record will be populated with data from the respective duplicates.
During content merging, we indicate fields associated with the description, location, and data of the unique collection event.
By default, fields_to_merge parameter of export_data function contains:</p><ul><li><p>Ctrl_fieldNotes</p></li>
<li><p>Ctrl_year</p></li>
<li><p>Ctrl_stateProvince</p></li>
<li><p>Ctrl_municipality</p></li>
<li><p>Ctrl_locality</p></li>
<li><p>Ctrl_countryCode</p></li>
<li><p>Ctrl_eventDate</p></li>
<li><p>Ctrl_habitat</p></li>
<li><p>Ctrl_level0Name</p></li>
<li><p>Ctrl_level1Name</p></li>
<li><p>Ctrl_level2Name</p></li>
<li><p>Ctrl_level3Name</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">export_data</span><span class="op">(</span></span>
<span>  occ_digital_voucher_file <span class="op">=</span> <span class="st">""</span>,</span>
<span>  occ_digital_voucher <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  merge_unusable_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fields_to_merge <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ctrl_fieldNotes"</span>, <span class="st">"Ctrl_year"</span>, <span class="st">"Ctrl_stateProvince"</span>,</span>
<span>    <span class="st">"Ctrl_municipality"</span>, <span class="st">"Ctrl_locality"</span>, <span class="st">"Ctrl_countryCode"</span>, <span class="st">"Ctrl_eventDate"</span>,</span>
<span>    <span class="st">"Ctrl_habitat"</span>, <span class="st">"Ctrl_level0Name"</span>, <span class="st">"Ctrl_level1Name"</span>, <span class="st">"Ctrl_level2Name"</span>,</span>
<span>    <span class="st">"Ctrl_level3Name"</span><span class="op">)</span>,</span>
<span>  fields_to_compare <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ctrl_gbifID"</span>, <span class="st">"Ctrl_scientificName"</span>, <span class="st">"Ctrl_recordedBy"</span>,</span>
<span>    <span class="st">"Ctrl_recordNumber"</span>, <span class="st">"Ctrl_identifiedBy"</span>, <span class="st">"Ctrl_dateIdentified"</span>,</span>
<span>    <span class="st">"Ctrl_institutionCode"</span>, <span class="st">"Ctrl_collectionCode"</span>, <span class="st">"Ctrl_datasetName"</span>,</span>
<span>    <span class="st">"Ctrl_datasetName"</span>, <span class="st">"Ctrl_language"</span>, <span class="st">"wcvp_plant_name_id"</span>, <span class="st">"wcvp_taxon_rank"</span>,</span>
<span>    <span class="st">"wcvp_taxon_status"</span>, <span class="st">"wcvp_family"</span>, <span class="st">"wcvp_taxon_name"</span>, <span class="st">"wcvp_taxon_authors"</span>,</span>
<span>    <span class="st">"wcvp_reviewed"</span>, <span class="st">"wcvp_searchNotes"</span><span class="op">)</span>,</span>
<span>  fields_to_parse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ctrl_gbifID"</span>, <span class="st">"Ctrl_bibliographicCitation"</span>, <span class="st">"Ctrl_language"</span>,</span>
<span>    <span class="st">"Ctrl_institutionCode"</span>, <span class="st">"Ctrl_collectionCode"</span>, <span class="st">"Ctrl_datasetName"</span>,</span>
<span>    <span class="st">"Ctrl_basisOfRecord"</span>, <span class="st">"Ctrl_catalogNumber"</span>, <span class="st">"Ctrl_recordNumber"</span>, <span class="st">"Ctrl_recordedBy"</span>,</span>
<span>    <span class="st">"Ctrl_occurrenceStatus"</span>, <span class="st">"Ctrl_eventDate"</span>, <span class="st">"Ctrl_year"</span>, <span class="st">"Ctrl_month"</span>, <span class="st">"Ctrl_day"</span>,</span>
<span>    <span class="st">"Ctrl_habitat"</span>, <span class="st">"Ctrl_fieldNotes"</span>, <span class="st">"Ctrl_eventRemarks"</span>, <span class="st">"Ctrl_countryCode"</span>,</span>
<span>    <span class="st">"Ctrl_stateProvince"</span>, <span class="st">"Ctrl_municipality"</span>, <span class="st">"Ctrl_county"</span>, <span class="st">"Ctrl_locality"</span>,</span>
<span>    <span class="st">"Ctrl_level0Name"</span>, <span class="st">"Ctrl_level1Name"</span>, <span class="st">"Ctrl_level2Name"</span>, </span>
<span>     <span class="st">"Ctrl_level3Name"</span>,</span>
<span>    <span class="st">"Ctrl_identifiedBy"</span>, <span class="st">"Ctrl_dateIdentified"</span>, <span class="st">"Ctrl_scientificName"</span>,</span>
<span>    <span class="st">"Ctrl_decimalLatitude"</span>, <span class="st">"Ctrl_decimalLongitude"</span>, <span class="st">"Ctrl_nameRecordedBy_Standard"</span>,</span>
<span>    <span class="st">"Ctrl_recordNumber_Standard"</span>, <span class="st">"Ctrl_key_family_recordedBy_recordNumber"</span>,</span>
<span>    <span class="st">"Ctrl_geospatial_quality"</span>, <span class="st">"Ctrl_verbatim_quality"</span>, <span class="st">"Ctrl_moreInformativeRecord"</span>,</span>
<span>    <span class="st">"Ctrl_coordinates_validated_by_gbif_issue"</span>, <span class="st">"wcvp_plant_name_id"</span>, <span class="st">"wcvp_taxon_rank"</span>,</span>
<span>    <span class="st">"wcvp_taxon_status"</span>, <span class="st">"wcvp_family"</span>, <span class="st">"wcvp_taxon_name"</span>, <span class="st">"wcvp_taxon_authors"</span>,</span>
<span>    <span class="st">"wcvp_reviewed"</span>, </span>
<span>     <span class="st">"wcvp_searchNotes"</span>, <span class="st">"parseGBIF_digital_voucher"</span>,</span>
<span>    <span class="st">"parseGBIF_duplicates"</span>, <span class="st">"parseGBIF_num_duplicates"</span>,</span>
<span>    <span class="st">"parseGBIF_non_groupable_duplicates"</span>, <span class="st">"parseGBIF_duplicates_grouping_status"</span><span class="op">)</span>,</span>
<span>  silence <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>occ_digital_voucher_file</dt>
<dd><p>CSV fila result of function select_digital_voucher()$occ_digital_voucher</p></dd>


<dt>occ_digital_voucher</dt>
<dd><p>data frame result of function select_digital_voucher()$occ_digital_voucher</p></dd>


<dt>merge_unusable_data</dt>
<dd><p>include records unique collection events incomplete in merge processing</p></dd>


<dt>fields_to_merge</dt>
<dd><p>fields to merge</p></dd>


<dt>fields_to_compare</dt>
<dd><p>fields to compare content frequency</p></dd>


<dt>fields_to_parse</dt>
<dd><p>all fields</p></dd>


<dt>silence</dt>
<dd><p>if TRUE does not display progress messages</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>list with 10 data frames</p><ul><li><p><strong>all_data</strong> All records processed, merged Unique collection events complete / incomplete and their duplicates</p></li>
<li><p><strong>useable_data_merge</strong> Merged Unique collection events complete</p></li>
<li><p><strong>useable_data_raw</strong> Raw Unique collection events complete</p></li>
<li><p><strong>duplicates</strong> Duplicates of unique collection events complete / incomplete</p></li>
<li><p><strong>unusable_data_merge</strong> Merged Unique collection events incomplete,
It is NA if merge_unusable_data is FALSE.</p></li>
<li><p><strong>unusable_data_raw</strong> Raw Unique collection events incomplete</p></li>
<li><p><strong>parseGBIF_general_summary</strong></p></li>
<li><p><strong>parseGBIF_merge_fields_summary</strong></p></li>
<li><p><strong>parseGBIF_merge_fields_summary_useable_data</strong></p></li>
<li><p><strong>parseGBIF_merge_fields_summary_unusable_data</strong> It is NA if merge_unusable_data is FALSE</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>Each data frame should be used as needed</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/ParsGBIF/man/batch_checkName_wcvp.html" class="external-link">batch_checkName_wcvp</a></code>, <code><a href="https://rdrr.io/pkg/ParsGBIF/man/extract_gbif_issue.html" class="external-link">extract_gbif_issue</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Pablo Hendrigo Alves de Melo,
Nadia Bystriakova &amp;
Alexandre Monro</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="va">export_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">export_data</span><span class="op">(</span>occ_digital_voucher_file <span class="op">=</span> <span class="va">file.occ_digital_voucher</span>,</span></span>
<span class="r-in"><span>                       merge_unusable_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'file.occ_digital_voucher' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">results</span><span class="op">$</span><span class="va">parseGBIF_general_summary</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span><span class="va">results</span><span class="op">$</span><span class="va">parseGBIF_merge_fields_summary</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span><span class="va">results</span><span class="op">$</span><span class="va">parseGBIF_merge_fields_summary_complete</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">all_data</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">unique_collection_event_complete_merge</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">unique_collection_event_incomplete_raw</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">duplicates</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'results' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Pablo Melo, Nadia Bystriakova, Alexandre Monro.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

